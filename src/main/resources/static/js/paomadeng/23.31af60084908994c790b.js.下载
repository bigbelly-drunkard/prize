webpackJsonp([23],{B5pq:function(t,s,i){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var e=i("3cXf"),a=i.n(e),r=i("pwft"),n=i("3FMC"),o=i("K9/F"),c=i("QtDR"),l=i("CMFd"),p=i("bMVv"),v={name:"marquee",components:{applyDialog:o.a,resultDialog:c.a,common:r.a,djs:n.a,introduction:l.a,bottom:p.a},data:function(){return{nowIndex:0,num:60,runAmount:0,prizes:[],lottery:[],is_draw:!1}},created:function(){this.getLottery()},methods:{getLottery:function(){var t=this;this.$http.get("mobile/getLottery").then(function(s){document.title=s.lottery.act_name,t.initPrizes(s.lottery.prizes),t.lottery=s.lottery,t.initData()})},initPrizes:function(t){var s=t.length;s>8&&(s=8);var i={id:0,name:"自动添加",picture:"http://cdn.choujiangle.cn/images/prize/default/gift.png"};if(i=a()(i),s<8)for(var e=8-s,r=0;r<e;r++)t.push(JSON.parse(i));var n=[];for(r=0;r<8;r++){var o=t[r];o.show_on=!1,n.push(o)}this.prizes=n},initData:function(){var t=this;this.$refs.djs.setData(this.lottery.djs),this.$refs.intro.setData(this.lottery),this.$refs.apply.setData(this.lottery),this.$refs.common.lottery=this.lottery,this.$refs.bottom.hide_adv=this.lottery.hide_adv,setTimeout(function(){t.$refs.common.show_loading=!1},300)},doDraw:function(){var t=this;1!=this.is_draw&&(0!=this.lottery.draw_amount?(this.is_draw=!0,this.$http.get("mobile/doDraw").then(function(s){return 102==s.flag?(t.is_draw=!1,void(t.$refs.apply.apply_dialog=!0)):103==s.flag?(t.is_draw=!1,void t.$refs.common.showCode()):100!=s.flag?(t.is_draw=!1,void t.$toast.fail(s.msg)):void t.doAction(s)})):this.$toast.fail("抽奖次数已用完！"))},doAction:function(t){var s=t.prize;this.runStart(s)},runStart:function(t){var s=this,i=this.runAmount%8;switch(i){case 3:i=4;break;case 4:i=7;break;case 5:i=6;break;case 6:i=5;break;case 7:i=3}this.prizes[this.nowIndex].show_on=!1,this.prizes[i].show_on=!0,this.nowIndex=i,setTimeout(function(){s.runAmount>50&&t.id==s.prizes[i].id?setTimeout(function(){s.$refs.result.setPrize(t),s.is_draw=!1},500):(s.runAmount++,s.runStart(t))},70)},selectDom:function(t){var s=this,i=70*t,e=t%8;switch(e){case 3:e=4;break;case 4:e=7;break;case 5:e=6;break;case 6:e=5;break;case 7:e=3}setTimeout(function(){s.prizes[s.nowIndex].show_on=!1,s.prizes[e].show_on=!0,s.nowIndex=e},i)}}},_={render:function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"marquee2"},[i("common",{ref:"common"}),t._v(" "),t._m(0),t._v(" "),i("div",{staticClass:"jihui"},[t._v("\n  \t\t您还有 "),i("span",[t._v(t._s(t.lottery.draw_amount))]),t._v(" 次机会\n  \t")]),t._v(" "),i("div",{staticClass:"border flex center"},[t.prizes.length>0?i("div",{staticClass:"prizes flex wrap space-between"},[i("div",{staticClass:"prize",class:{prize_on:t.prizes[0].show_on}},[i("div",{staticClass:"img"},[i("img",{attrs:{src:t.prizes[0].picture}})]),t._v(" "),i("div",{staticClass:"text"},[t._v("\n            "+t._s(t.prizes[0].name)+"\n\t\t\t\t\t")])]),t._v(" "),i("div",{staticClass:"prize",class:{prize_on:t.prizes[1].show_on}},[i("div",{staticClass:"img"},[i("img",{attrs:{src:t.prizes[1].picture}})]),t._v(" "),i("div",{staticClass:"text"},[t._v("\n            "+t._s(t.prizes[1].name)+"\n\t\t\t\t\t")])]),t._v(" "),i("div",{staticClass:"prize",class:{prize_on:t.prizes[2].show_on}},[i("div",{staticClass:"img"},[i("img",{attrs:{src:t.prizes[2].picture}})]),t._v(" "),i("div",{staticClass:"text"},[t._v("\n            "+t._s(t.prizes[2].name)+"\n\t\t\t\t\t")])]),t._v(" "),i("div",{staticClass:"prize",class:{prize_on:t.prizes[3].show_on}},[i("div",{staticClass:"img"},[i("img",{attrs:{src:t.prizes[3].picture}})]),t._v(" "),i("div",{staticClass:"text"},[t._v("\n            "+t._s(t.prizes[3].name)+"\n\t\t\t\t\t")])]),t._v(" "),i("div",{staticClass:"prize prize1"},[i("img",{staticClass:"choujiang-btn",attrs:{src:"http://cdn.choujiangle.cn/themes/marquee2/btn.png"},on:{click:t.doDraw}})]),t._v(" "),i("div",{staticClass:"prize",class:{prize_on:t.prizes[4].show_on}},[i("div",{staticClass:"img"},[i("img",{attrs:{src:t.prizes[4].picture}})]),t._v(" "),i("div",{staticClass:"text"},[t._v("\n            "+t._s(t.prizes[4].name)+"\n\t\t\t\t\t")])]),t._v(" "),i("div",{staticClass:"prize",class:{prize_on:t.prizes[5].show_on}},[i("div",{staticClass:"img"},[i("img",{attrs:{src:t.prizes[5].picture}})]),t._v(" "),i("div",{staticClass:"text"},[t._v("\n            "+t._s(t.prizes[5].name)+"\n\t\t\t\t\t")])]),t._v(" "),i("div",{staticClass:"prize",class:{prize_on:t.prizes[6].show_on}},[i("div",{staticClass:"img"},[i("img",{attrs:{src:t.prizes[6].picture}})]),t._v(" "),i("div",{staticClass:"text"},[t._v("\n            "+t._s(t.prizes[6].name)+"\n\t\t\t\t\t")])]),t._v(" "),i("div",{staticClass:"prize",class:{prize_on:t.prizes[7].show_on}},[i("div",{staticClass:"img"},[i("img",{attrs:{src:t.prizes[7].picture}})]),t._v(" "),i("div",{staticClass:"text"},[t._v("\n            "+t._s(t.prizes[7].name)+"\n\t\t\t\t\t")])])]):t._e()]),t._v(" "),i("djs",{ref:"djs"}),t._v(" "),i("introduction",{ref:"intro"}),t._v(" "),i("bottom",{ref:"bottom"}),t._v(" "),i("applyDialog",{ref:"apply"}),t._v(" "),i("resultDialog",{ref:"result"})],1)},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"top"},[s("img",{attrs:{src:"//cdn.choujiangle.cn/themes/marquee2/title.png"}})])}]};var d=i("C7Lr")(v,_,!1,function(t){i("KDJs")},null,null);s.default=d.exports},KDJs:function(t,s){}});
//# sourceMappingURL=23.31af60084908994c790b.js.map